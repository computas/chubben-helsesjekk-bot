(()=>{var e={};e.id=133,e.ids=[133],e.modules={33104:e=>{"use strict";e.exports=require("@navikt/next-logger")},53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},6005:e=>{"use strict";e.exports=require("node:crypto")},28426:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(4859),r(11043),r(49356),r(90996);var a=r(30170),s=r(45002),n=r(83876),i=r.n(n),l=r(66299),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["global-helse",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4859)),"C:\\Users\\mabo\\Documents\\chubben\\helsesjekk-bot\\src\\app\\global-helse\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11043)),"C:\\Users\\mabo\\Documents\\chubben\\helsesjekk-bot\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,49356)),"C:\\Users\\mabo\\Documents\\chubben\\helsesjekk-bot\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\mabo\\Documents\\chubben\\helsesjekk-bot\\src\\app\\global-helse\\page.tsx"],u="/global-helse/page",m={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/global-helse/page",pathname:"/global-helse",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},90316:(e,t,r)=>{Promise.resolve().then(r.bind(r,42722)),Promise.resolve().then(r.bind(r,16716)),Promise.resolve().then(r.t.bind(r,34080,23)),Promise.resolve().then(r.bind(r,78477))},49526:(e,t,r)=>{"use strict";r.d(t,{F:()=>a.F});var a=r(6401)},42722:(e,t,r)=>{"use strict";r.d(t,{Heading:()=>a.X6,Skeleton:()=>s.O});var a=r(6401),s=r(23119)},75584:(e,t,r)=>{"use strict";r.d(t,{j:()=>a.Z});var a=r(36062)},74617:(e,t,r)=>{"use strict";r.d(t,{r:()=>a.r});var a=r(51214)},78477:(e,t,r)=>{"use strict";r.d(t,{default:()=>C});var a=r(97247),s=r(37939),n=r(29377),i=r(96240),l=(e,t)=>e.filter(t),o=e=>(t,r,a)=>e(t,r,a)?{done:!1,hasNext:!0,next:t}:n.a;function d(e){return!!e}var c=r(28964),u=r(83936),m=r(57552),h=r(90486),p=r(50511),v=r(69331),g=r(99033),b=r(67579),f=r(389),x=r(28801),y=r(74617),w=r(49526),j=r(4658),k=r(32802),E=r(24532),_=r(6004);let A={score:"rgba(0, 103, 197, 0.65)",[E.c.TEAM_HEALTH]:"rgba(139, 69, 19, 0.65)",[E.c.SPEED]:"rgba(102, 102, 51, 0.65)",[E.c.TECH]:"rgba(128, 0, 128, 0.65)",[E.c.OTHER]:"rgba(255, 140, 0, 0.65)"};function O({cx:e,cy:t,value:r}){return null==r?null:a.jsx("svg",{x:e-10,y:t-10,width:20,height:20,fill:"red",children:a.jsx("text",{textAnchor:"middle",x:"50%",y:"13",fontSize:"8",children:(0,k.S)(r)})})}let C=function({data:e}){let[t,r]=(0,c.useState)(!1),n=(0,c.useMemo)(()=>function({payload:e,active:r}){if(!r&&0===e.length)return null;let[n]=e;return(0,a.jsxs)("div",{className:"bg-white border border-border-default rounded p-2",children:[(0,a.jsxs)(w.F,{children:["Uke ",(0,j.uW)(n.payload.timestamp),", ",n.payload.timestamp.getFullYear()]}),t?(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("span",{children:(0,k.S)(n.payload.score)}),a.jsx("span",{style:{color:"rgb(0, 103, 197, 0.5)"},children:"Total"}),a.jsx("span",{children:n.payload.score.toFixed(2)})]}):function(...e){return(0,i.a)(l,e,o)}(s.a(E.c).map(e=>null!=n.payload[e]?(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("span",{children:(0,k.S)(n.payload[e])}),a.jsx("span",{style:{color:A[e]},children:(0,_.L)(e)}),a.jsx("span",{children:n.payload[e].toFixed(2)})]},e):null),d)]})},[t]);return(0,a.jsxs)("div",{className:"w-full aspect-video",children:[a.jsx("div",{className:"ml-16",children:a.jsx(y.r,{onChange:e=>r(e.target.checked),children:"Samlet score"})}),a.jsx(u.h,{width:"100%",height:"100%",children:(0,a.jsxs)(m.c,{data:e,children:[a.jsx(h.K,{dataKey:"timestamp",padding:{left:30,right:30},angle:10,fontSize:12,tickFormatter:(e,t)=>t%2==0?"":`Uke ${(0,j.uW)(e)}, ${e.getFullYear()}`}),a.jsx(p.B,{yAxisId:"left",domain:[0,5],tickCount:6}),a.jsx(p.B,{yAxisId:"right",orientation:"right",type:"number",dataKey:"answers",fontSize:12}),a.jsx(v.q,{strokeDasharray:"3 3"}),a.jsx(g.$,{yAxisId:"right",fill:"lightgray",type:"monotone",dataKey:"answers",isAnimationActive:!1,label:{position:"insideBottom",angle:0,fill:"white",offset:30,fontSize:12}}),a.jsx(b.u,{content:n}),t?a.jsx(f.x,{yAxisId:"left",type:"monotone",dataKey:"score",stroke:"rgb(0, 103, 197, 0.5)",strokeWidth:2,isAnimationActive:!1,dot:({key:e,...t})=>a.jsx(O,{...t},e)}):s.a(E.c).map(e=>a.jsx(f.x,{yAxisId:"left",type:"monotone",dataKey:e,stroke:A[e],strokeWidth:2,isAnimationActive:!1,dot:({key:e,...t})=>a.jsx(O,{...t},e)},e)),a.jsx(x.D,{formatter:e=>"answers"===e?"Antall svar":"score"===e?"Samlet score":(0,_.L)(e)})]})})]})}},24532:(e,t,r)=>{"use strict";var a,s;r.d(t,{c:()=>a,j:()=>s}),function(e){e.TEAM_HEALTH="TEAM_HEALTH",e.SPEED="SPEED",e.TECH="TECH",e.OTHER="OTHER"}(a||(a={})),function(e){e.GOOD="GOOD",e.MEDIUM="MEDIUM",e.BAD="BAD"}(s||(s={}))},6004:(e,t,r)=>{"use strict";r.d(t,{L:()=>s});var a=r(24532);function s(e){switch(e){case a.c.TEAM_HEALTH:return"Teamhelse";case a.c.SPEED:return"Fart & flyt";case a.c.TECH:return"Teknisk";case a.c.OTHER:return"Annet"}}},4658:(e,t,r)=>{"use strict";r.d(t,{JT:()=>o,dJ:()=>u,hR:()=>c,jQ:()=>m,uW:()=>l});var a=r(15296),s=r(90600),n=r(93435),i=r(19447);function l(e){return(0,a.Q)(e,{weekStartsOn:1,locale:i.nb})}function o(){return new Date(new Date().toLocaleString("en",{timeZone:"Europe/Oslo"}))}let d=["mandag","tirsdag","onsdag","torsdag","fredag","l\xf8rdag","s\xf8ndag"];function c(e){return d[e]}function u(e){let t=o();return(0,s.j)(e,t)}function m(e){let t=o();return(0,n.A)(e,t)}},32802:(e,t,r)=>{"use strict";function a(e){return e<2.6?"\uD83D\uDD34":e<4?"\uD83D\uDFE1":"\uD83D\uDFE2"}r.d(t,{S:()=>a})},4859:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,metadata:()=>m});var a=r(72051),s=r(26269),n=r(6778),i=r(45347);let l=(0,i.createProxy)(String.raw`C:\Users\mabo\Documents\chubben\helsesjekk-bot\node_modules\@navikt\ds-react\esm\index.js@__barrel_optimize__?names=Heading,Skeleton#Heading`),o=(0,i.createProxy)(String.raw`C:\Users\mabo\Documents\chubben\helsesjekk-bot\node_modules\@navikt\ds-react\esm\index.js@__barrel_optimize__?names=Heading,Skeleton#Skeleton`);var d=r(18545),c=r(92937);let u=(0,i.createProxy)(String.raw`C:\Users\mabo\Documents\chubben\helsesjekk-bot\src\components\graphs\GlobalScoreGraph.tsx#default`),m={title:"Helsesjekk | Helse i NAV",description:"Graf over helsen i hele NAV"};async function h(){(0,n.unstable_noStore)();let e=await (0,c.cY)();return(0,a.jsxs)("div",{children:[a.jsx(l,{size:"medium",level:"3",children:"Samlet score for alle aktive team"}),a.jsx("div",{className:"mt-4",children:a.jsx(u,{data:e})})]})}let p=function(){return(0,a.jsxs)("div",{children:[a.jsx(d.Z,{href:"/"}),a.jsx(l,{size:"large",children:"Helse hele NAV"}),a.jsx(s.Suspense,{fallback:(0,a.jsxs)("div",{className:"w-full aspect-video",children:[a.jsx(l,{size:"medium",level:"3",children:"Samlet score for alle aktive team"}),a.jsx(o,{height:"100%",width:"100%",variant:"rounded"})]}),children:a.jsx(h,{})})]})}},18545:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(72051);r(26269);var s=r(92349),n=r(84920);let i=function({href:e}){return(0,a.jsxs)(s.default,{href:e,className:"flex gap-1 items-center transform -translate-y-full absolute",children:[a.jsx(n.Z,{"aria-hidden":!0}),"Tilbake"]})}},92937:(e,t,r)=>{"use strict";r.d(t,{$X:()=>w,DZ:()=>x,cY:()=>y,oN:()=>f});var a=r(10845),s=r(61121),n=r(67166),i=r(77069),l=r(40719),o=r(71785),d=r(72323),c=r(53622),u=r(83562),m=r(3717),h=r(26075),p=r(27749),v=r(46005),g=r(17569),b=r(87924);async function f(e){let t=await (0,b.prisma)().team.findFirst({where:{id:e},include:{Asked:{where:{revealed:!0,skipped:!1},include:{answers:!0}}}});return null==t?{error:"Fant ikke ditt team"}:0===t.Asked.length?{error:"Teamet ditt har ingen sp\xf8rringer enda."}:a.a(t.Asked.filter(e=>e.answers.length>0).map(e=>{let t=(0,v.q)(e);return{timestamp:e.timestamp,score:t.totalScore,answers:t.answerCount}}),s.a("timestamp"))}async function x(e){let t=await (0,b.prisma)().team.findFirst({where:{id:e},include:{Asked:{where:{revealed:!0,skipped:!1},include:{answers:!0}}}});if(null==t)return{error:"Fant ikke ditt team"};if(0===t.Asked.length)return{error:"Teamet ditt har ingen sp\xf8rringer enda."};let r=n.a(t.Asked,i.a(e=>e.answers.length>0),l.a(v.q));return n.a(r,o.a(({timestamp:e,scoredQuestions:t})=>t.map(t=>({...t,timestamp:e}))),l.a(e=>({question:{questionId:e.id,question:e.question,answers:e.answers},scoring:[{timestamp:e.timestamp,averageScore:0===e.score?null:e.score,distribution:e.distribution}]})),d.a((e,t)=>{let r=e[t.question.questionId];return e[t.question.questionId]=r?{...r,scoring:[...r.scoring,...t.scoring]}:t,e},{}),c.a(),l.a(e=>({...e,scoring:n.a(e.scoring,a.a(e=>e.timestamp))})))}async function y(){let e=await (0,b.prisma)().asked.findMany({where:{revealed:!0,skipped:!1,team:{active:!0}},include:{answers:!0}});return n.a(e,i.a(e=>e.answers.length>0),a.a(s.a("timestamp")),u.a(e=>`${(0,p.S)(e.timestamp)}-${(0,g.uW)(e.timestamp)}`),m.a(l.a(v.q)),m.a(e=>{let t=h.a(e,s.a("totalScore")),r=n.a(e,o.a(e=>e.scoredQuestions),u.a(e=>e.type),m.a(e=>h.a(e,s.a("score"))/e.length));return{timestamp:e[0].timestamp,score:t/e.length,answers:h.a(e,e=>e.answerCount),...r}}),c.a())}async function w(e){let t=await (0,b.prisma)().asked.findMany({where:{teamId:e,revealed:!0,skipped:!1},include:{answers:!0}});return n.a(t,i.a(e=>e.answers.length>=3),l.a(v.q),a.a([s.a("timestamp"),"desc"]))}},36062:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(28964),s=r(95094),n=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)0>t.indexOf(a[s])&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r};let i=(0,a.forwardRef)((e,t)=>{var{title:r,titleId:i}=e,l=n(e,["title","titleId"]);let o=(0,s.M)();return o=r?i||"title-"+o:void 0,a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:t,"aria-labelledby":o},l),r?a.createElement("title",{id:o},r):null,a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 2.25A4.75 4.75 0 0 0 7.25 7v2.25H7A1.75 1.75 0 0 0 5.25 11v9c0 .414.336.75.75.75h12a.75.75 0 0 0 .75-.75v-9A1.75 1.75 0 0 0 17 9.25h-.25V7A4.75 4.75 0 0 0 12 2.25m3.25 7V7a3.25 3.25 0 0 0-6.5 0v2.25zM12 13a1.5 1.5 0 0 0-.75 2.8V17a.75.75 0 0 0 1.5 0v-1.2A1.5 1.5 0 0 0 12 13",clipRule:"evenodd"}))})},41354:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var a=r(28964),s=r(75584);let n=({readOnly:e,nativeReadOnly:t=!0})=>e?a.createElement(s.j,Object.assign({},t?{"aria-hidden":!0}:{title:"readonly"},{className:"navds-form-field__readonly-icon"})):null},63443:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});let a=(0,r(28964).createContext)(null)},51214:(e,t,r)=>{"use strict";r.d(t,{r:()=>m});var a=r(61929),s=r(28964),n=r(52994),i=r(6401),l=r(88615),o=r(41354),d=r(92096),c=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)0>t.indexOf(a[s])&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r};let u=()=>s.createElement("svg",{width:"12",height:"10",viewBox:"0 0 12 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img","aria-hidden":!0,"aria-label":"Deaktiver valg"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.2674 0.647802C11.8762 1.20971 11.9141 2.1587 11.3522 2.76743L5.35221 9.26743C5.07531 9.56739 4.68813 9.74155 4.27998 9.74971C3.87184 9.75787 3.478 9.59933 3.18934 9.31067L0.68934 6.81067C0.103553 6.22488 0.103553 5.27513 0.68934 4.68935C1.27513 4.10356 2.22487 4.10356 2.81066 4.68935L4.20673 6.08541L9.14779 0.732587C9.7097 0.123856 10.6587 0.0858967 11.2674 0.647802Z",fill:"currentColor"})),m=(0,s.forwardRef)((e,t)=>{var r,m,h;let{inputProps:p,size:v,readOnly:g}=(0,d.Y)(e,"switch"),{children:b,className:f,description:x,hideLabel:y=!1,loading:w,checked:j,defaultChecked:k,position:E="left"}=e,_=c(e,["children","className","description","hideLabel","loading","checked","defaultChecked","position"]),[A,O]=(0,s.useState)(null!==(r=null!=k?k:j)&&void 0!==r&&r);(0,s.useEffect)(()=>{void 0!==j&&O(j)},[j]);let C=null!=j?j:A;return s.createElement("div",{className:(0,a.Z)("navds-switch",e.className,`navds-switch--${v}`,`navds-switch--${E}`,{"navds-switch--loading":w,"navds-switch--disabled":null!==(m=p.disabled)&&void 0!==m?m:w,"navds-switch--readonly":g})},s.createElement("input",Object.assign({},(0,l.CE)(_,["size","readOnly"]),(0,l.CE)(p,["aria-invalid","aria-describedby"]),{disabled:null!==(h=p.disabled)&&void 0!==h?h:w,checked:j,defaultChecked:k,ref:t,type:"checkbox",onChange:t=>{!g&&(O(t.target.checked),e.onChange&&e.onChange(t))},onClick:t=>{var r;if(g){t.preventDefault();return}null===(r=null==e?void 0:e.onClick)||void 0===r||r.call(e,t)},className:(0,a.Z)(f,"navds-switch__input")})),s.createElement("span",{className:"navds-switch__track"},s.createElement("span",{className:"navds-switch__thumb"},w?s.createElement(n.a,{size:"xsmall","aria-live":"polite",variant:C?"interaction":"neutral"}):C?s.createElement(u,null):null)),s.createElement("label",{htmlFor:p.id,className:"navds-switch__label-wrapper"},s.createElement("div",{className:(0,a.Z)("navds-switch__content",{"navds-sr-only":y,"navds-switch--with-description":!!x&&!y})},s.createElement(i.NG,{as:"div",size:v,className:"navds-switch__label"},s.createElement(o.C,{readOnly:g,nativeReadOnly:!1}),b),x&&s.createElement(i.NG,{size:v,as:"div",className:"navds-form-field__subdescription navds-switch__description"},x))))})},92096:(e,t,r)=>{"use strict";r.d(t,{Y:()=>l});var a=r(61929),s=r(28964),n=r(43185),i=r(63443);let l=(e,t)=>{var r,l,o;let{size:d,error:c,errorId:u}=e,m=(0,s.useContext)(i.P),h=(0,n.Me)(),p=null!==(r=e.id)&&void 0!==r?r:`${t}-${h}`,v=null!=u?u:`${t}-error-${h}`,g=`${t}-description-${h}`,b=(null==m?void 0:m.disabled)||e.disabled,f=((null==m?void 0:m.readOnly)||e.readOnly)&&!b||void 0,x=!b&&!f&&!!(c||(null==m?void 0:m.error)),y=!b&&!f&&!!c&&"boolean"!=typeof c,w=Object.assign({},x?{"aria-invalid":!0}:{});return null==e||e.required,{showErrorMsg:y,hasError:x,errorId:v,inputDescriptionId:g,size:null!==(l=null!=d?d:null==m?void 0:m.size)&&void 0!==l?l:"medium",readOnly:f,inputProps:Object.assign(Object.assign({id:p},w),{"aria-describedby":(0,a.Z)(e["aria-describedby"],{[g]:!!(null==e?void 0:e.description)&&"string"==typeof(null==e?void 0:e.description),[v]:y,[null!==(o=null==m?void 0:m.errorId)&&void 0!==o?o:""]:x&&!!(null==m?void 0:m.error)})||void 0,disabled:b})}}},37939:(e,t,r)=>{"use strict";r.d(t,{a:()=>s});var a=r(96240);function s(...e){return(0,a.a)(Object.keys,e)}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[285,45,213,955,972,59,778,419,105],()=>r(28426));module.exports=a})();